# Quickstart: Web JS Realtime Dashboard

**Feature**: 002-realtime-dashboard  
**Date**: 2024-12-19

## Overview

The Web JS Realtime Dashboard provides a browser-based interface for monitoring OTLP traces and metrics in real-time. It reads Arrow IPC files from the Rust service's output directory and displays them with live updates.

## Prerequisites

- Modern browser with WebAssembly support (Chrome 90+, Firefox 88+, Safari 14+, Edge 90+)
- Arrow IPC files generated by the OTLP Rust service (in `{OUTPUT_DIR}/otlp/traces` and `{OUTPUT_DIR}/otlp/metrics`)
- Node.js 18+ (for development)

## Quick Start

### Option 1: Development Mode

```bash
# Navigate to dashboard directory
cd dashboard

# Install dependencies
npm install

# Start development server
npm run dev

# Open browser to http://localhost:5173
```

### Option 2: Production Build

```bash
# Build dashboard
npm run build

# Serve dist/ directory via any static file server
# Example with Python:
cd dist
python3 -m http.server 8000

# Open browser to http://localhost:8000
```

## Using the Dashboard

### 1. Select Output Directory

1. Click "Select Directory" button
2. Navigate to the Rust service's output directory (e.g., `./output_dir`)
3. Select the directory

**Note**: In browsers without File System Access API (Firefox, Safari), you may need to select individual files or use a file input.

### 2. View Live Traces

1. Navigate to "Traces" tab
2. Traces will appear in real-time as they are written to Arrow IPC files
3. Use filters to search by:
   - Trace ID
   - Service name
   - Span name
   - Error status
   - Time range
4. Click on a trace to see detailed information

### 3. View Metrics Graphs

1. Navigate to "Metrics" tab
2. Select metrics to display from the metric selector
3. Graphs update in real-time as new metric data arrives
4. Use time range selector to view different time periods
5. Hover over data points to see detailed information

### 4. Pause/Resume Live Stream

- Click "Pause" button to pause live updates
- Click "Resume" button to resume live updates
- Useful when investigating specific traces or time periods

## Configuration

### Polling Interval

Default polling interval is 1 second. To change:

```javascript
// In dashboard/src/config.js
export const POLLING_INTERVAL_MS = 2000; // 2 seconds
```

### Maximum Traces Displayed

Default maximum is 10,000 traces. To change:

```javascript
// In dashboard/src/config.js
export const MAX_TRACES = 20000; // 20,000 traces
```

### Maximum Graph Data Points

Default maximum is 10,000 points per graph. To change:

```javascript
// In dashboard/src/config.js
export const MAX_GRAPH_POINTS = 5000; // 5,000 points
```

## Troubleshooting

### No Traces/Metrics Appearing

1. Verify Arrow IPC files exist in the output directory
2. Check browser console for errors
3. Verify file permissions (browser needs read access)
4. Try refreshing the page and reselecting the directory

### Performance Issues

1. Reduce polling interval if too many files
2. Reduce maximum traces/metrics displayed
3. Close other browser tabs to free memory
4. Check browser console for memory warnings

### File Access Errors

1. Ensure you have read permissions for the output directory
2. Try selecting individual files instead of directory (if File System Access API not available)
3. Check browser console for specific error messages

## Architecture

### Data Flow

```
Arrow IPC Files → File Reader → Arrow Parser → DuckDB-wasm → Query Results → UI Components
```

### Components

- **File Watcher**: Polls for new Arrow IPC files every 1 second
- **File Reader**: Reads Arrow IPC files via File System Access API or FileReader API
- **Arrow Parser**: Parses Arrow IPC Streaming format using `apache-arrow`
- **DuckDB Client**: Queries Arrow data using SQL
- **Trace List**: Displays traces in scrollable table with filtering
- **Metric Graphs**: Displays metrics as time-series graphs using Plotly.js

## Browser Compatibility

### File System Access API (Chrome, Edge)

- Full directory access
- Automatic file watching (future)
- Best user experience

### FileReader API (Firefox, Safari)

- File selection required
- Manual file refresh
- Still fully functional

## Next Steps

- See [spec.md](./spec.md) for full feature specification
- See [plan.md](./plan.md) for implementation details
- See [data-model.md](./data-model.md) for data structures

